<div class="self-stretch px-4 pt-6 pb-12 rounded-[10px] shadow-[2px_4px_14px_0px_rgba(217,235,244,1.00)] flex flex-col justify-start items-start gap-6 bg-white border border-sky-700">
  <div class="flex flex-col justify-start items-end gap-12">
    <div class="w-full md:w-[544px] flex flex-col justify-center items-center gap-6">
      <div class="self-stretch flex flex-col justify-start items-start gap-4">
        
        <!-- Customized View - Show when Customized package is selected -->
        @if (isCustomizedView) {
          <!-- Standard Listing Job Section -->
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 bg-[#0E73A9] rounded-full flex items-center justify-center cursor-pointer" (click)="toggleStandard()">
                <span class="text-white text-[16px] mb-1 font-bold">{{ isStandardExpanded() ? '-' : '+' }}</span>
              </div>
              <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Standard Listing Job</div>
            </div>
            
            <!-- Quantity Controls - Show on same line when expanded -->
            @if (isStandardExpanded()) {
              <div class="flex flex-col items-center gap-1">
                <div class="flex justify-start items-center gap-3">
                  <button (click)="decrementStandardQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                    </svg>
                  </button>
                  <div class="px-4 py-2 bg-white rounded-md outline outline-1 outline-offset-[-1px] outline-sky-700 inline-flex flex-col justify-center items-center gap-2.5">
                    <input type="number"
                      class="justify-start text-zinc-800 text-sm font-medium font-['Inter'] w-10 text-center outline-none no-spinner"
                      [formControl]="standardQuantityControl"
                      min="0" max="9999"
                      appNumericOnly
                    />
                  </div>
                  <button (click)="incrementStandardQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                  </button>
                </div>
                @if (standardQuantity > 0 && !isInternational) {
                  <div class="text-[#616161] text-xs font-medium font-['Inter']">
                    @if (standardQuantity >= 5 && standardQuantity <= 10) { 12% Discount Applied }
                    @else if (standardQuantity >= 11 && standardQuantity <= 19) { 23% Discount Applied }
                    @else if (standardQuantity >= 20 && standardQuantity <= 29) { 25% Discount Applied }
                    @else if (standardQuantity >= 30 && standardQuantity <= 40) { 30% Discount Applied }
                    @else if (standardQuantity >= 41 && standardQuantity <= 50) { 33% Discount Applied }
                    @else if (standardQuantity >= 51 && standardQuantity <= 100) { 36% Discount Applied }
                    @else if (standardQuantity >= 101 && standardQuantity <= 200) { 40% Discount Applied }
                    @else if (standardQuantity >= 201) { 44% Discount Applied }
                  </div>
                }
              </div>
            }
          </div>
          
          <!-- Instructional Text - Only show when NOT expanded -->
          @if (!isStandardExpanded()) {
            <div class="self-stretch px-4 -mt-6 -ml-4">
              <div class="text-[#0E73A9] text-[13px] font-normal font-['Inter']">To add Standard Listing Job, click the plus (+) icon</div>
            </div>
          }

          <!-- Premium Listing Job Section -->
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 bg-[#0E73A9] rounded-full flex items-center justify-center cursor-pointer" (click)="togglePremium()">
                <span class="text-white text-[16px] mb-1 font-bold">{{ isPremiumExpanded() ? '-' : '+' }}</span>
              </div>
              <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Premium Listing Job</div>
            </div>
            
            <!-- Quantity Controls - Show on same line when expanded -->
            @if (isPremiumExpanded()) {
              <div class="flex flex-col items-center gap-1">
                <div class="flex justify-start items-center gap-3">
                  <button (click)="decrementPremiumQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                    </svg>
                  </button>
                  <div class="px-4 py-2 bg-white rounded-md outline outline-1 outline-offset-[-1px] outline-sky-700 inline-flex flex-col justify-center items-center gap-2.5">
                    <input type="number"
                      class="justify-start text-zinc-800 text-sm font-medium font-['Inter'] w-10 text-center outline-none no-spinner"
                      [formControl]="premiumQuantityControl"
                      min="0" max="9999"
                      appNumericOnly
                    />
                  </div>
                  <button (click)="incrementPremiumQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                  </button>
                </div>
                @if (premiumQuantity > 0 && !isInternational) {
                  <div class="text-[#616161] text-xs font-medium font-['Inter']">
                    @if (premiumQuantity >= 5 && premiumQuantity <= 10) { 18% Discount Applied }
                    @else if (premiumQuantity >= 11 && premiumQuantity <= 19) { 28% Discount Applied }
                    @else if (premiumQuantity >= 20 && premiumQuantity <= 29) { 28% Discount Applied }
                    @else if (premiumQuantity >= 30 && premiumQuantity <= 40) { 38% Discount Applied }
                    @else if (premiumQuantity >= 41 && premiumQuantity <= 50) { 43% Discount Applied }
                    @else if (premiumQuantity >= 51 && premiumQuantity <= 100) { 53% Discount Applied }
                    @else if (premiumQuantity >= 101 && premiumQuantity <= 200) { 57% Discount Applied }
                    @else if (premiumQuantity >= 201) { 62% Discount Applied }
                  </div>
                }
              </div>
            }
          </div>
          
          <!-- Instructional Text - Only show when NOT expanded -->
          @if (!isPremiumExpanded()) {
            <div class="self-stretch px-4 -mt-6 -ml-4">
              <div class="text-[#0E73A9] text-[13px] font-normal font-['Inter']">To add Premium Listing Job, click the plus (+) icon</div>
            </div>
          }

          <!-- Premium Plus Job Section -->
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 bg-[#0E73A9] rounded-full flex items-center justify-center cursor-pointer" (click)="togglePremiumPlus()">
                <span class="text-white text-[16px] mb-1 font-bold">{{ isPremiumPlusExpanded() ? '-' : '+' }}</span>
              </div>
              <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Premium Plus Job</div>
            </div>
            
            <!-- Quantity Controls - Show on same line when expanded -->
            @if (isPremiumPlusExpanded()) {
              <div class="flex flex-col items-center gap-1">
                <div class="flex justify-start items-center gap-3">
                  <button (click)="decrementPremiumPlusQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                    </svg>
                  </button>
                  <div class="px-4 py-2 bg-white rounded-md outline outline-1 outline-offset-[-1px] outline-sky-700 inline-flex flex-col justify-center items-center gap-2.5">
                    <input type="number"
                      class="justify-start text-zinc-800 text-sm font-medium font-['Inter'] w-10 text-center outline-none no-spinner"
                      [formControl]="premiumPlusQuantityControl"
                      min="0" max="9999"
                      appNumericOnly
                    />
                  </div>
                  <button (click)="incrementPremiumPlusQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer">
                    <svg class="w-3.5 h-3.5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                  </button>
                </div>
                @if (premiumPlusQuantity > 0 && !isInternational) {
                  <div class="text-[#616161] text-xs font-medium font-['Inter']">
                    @if (premiumPlusQuantity >= 5 && premiumPlusQuantity <= 10) { 18% Discount Applied }
                    @else if (premiumPlusQuantity >= 11 && premiumPlusQuantity <= 19) { 28% Discount Applied }
                    @else if (premiumPlusQuantity >= 20 && premiumPlusQuantity <= 29) { 28% Discount Applied }
                    @else if (premiumPlusQuantity >= 30 && premiumPlusQuantity <= 40) { 38% Discount Applied }
                    @else if (premiumPlusQuantity >= 41 && premiumPlusQuantity <= 50) { 43% Discount Applied }
                    @else if (premiumPlusQuantity >= 51 && premiumPlusQuantity <= 100) { 53% Discount Applied }
                    @else if (premiumPlusQuantity >= 101 && premiumPlusQuantity <= 200) { 57% Discount Applied }
                    @else if (premiumPlusQuantity >= 201) { 62% Discount Applied }
                  </div>
                }
              </div>
            }
          </div>
          
          <!-- Instructional Text - Only show when NOT expanded -->
          @if (!isPremiumPlusExpanded()) {
            <div class="self-stretch px-4 -mt-6 -ml-4">
              <div class="text-[#0E73A9] text-[13px] font-normal font-['Inter']">To add Premium Plus Job, click the plus (+) icon</div>
            </div>
          }

          <!-- Talent Search Access Section -->
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 bg-[#0E73A9] rounded-full  flex items-center justify-center cursor-pointer" (click)="toggleTalentSearchCustomized()">
                <span class="text-white text-[16px] mb-1 font-bold">{{ isTalentSearchCustomizedExpanded() ? '-' : '+' }}</span>
              </div>
              <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Talent Search Access</div>
            </div>
            
            <!-- CV Count - Show on same line when expanded -->
            @if (isTalentSearchCustomizedExpanded()) {
              <div class="text-gray-500 text-[14px] font-bold font-['Inter']">{{ formattedCvCount }} CVs</div>
            }
          </div>
          
          <div class="self-stretch px-4 -mt-6 -ml-4">
            <div class="text-[#0E73A9] text-[13px] font-normal font-['Inter']">To explore Talent Search, click the plus (+) icon</div>
          </div>
        }

        <!-- Regular View - Show when NOT Customized package -->
        @if (!isCustomizedView) {
          <!-- Header Section with Package Name and Starting Price -->
          <div class="self-stretch inline-flex justify-between items-center">
            <div class="justify-start text-Colors-Text-text-primary-(900) text-base font-semibold font-['Inter'] leading-6">
              {{ selectedPackage.name }}
            </div>
            <div class="flex justify-start items-end gap-1">
              <div class="justify-start text-[#0E73A9] text-lg font-semibold font-['Inter'] leading-6">
                {{ formatNumber(startingPrice) }} {{ currencyLabel }}
              </div>
              <div class="justify-start text-[#667085] text-sm font-medium font-['Inter'] leading-5">
                Starting Package
              </div>
            </div>
          </div>
          
          <div class="self-stretch h-0 outline outline-1 outline-offset-[-0.50px] outline-neutral-200"></div>
          
          <!-- Quantity Section -->
          <div class="self-stretch pb-2 inline-flex justify-between items-center">
            <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Quantity</div>
            <div class="flex flex-col items-center gap-1">
              <div class="flex justify-start items-center gap-3">
                <button (click)="decrementQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer flex items-center justify-center">
                  <svg class="w-4 h-4 text-sky-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                  </svg>
                </button>
                <div class="px-4 py-2 bg-white rounded-md outline outline-1 outline-offset-[-1px] outline-sky-700 inline-flex flex-col justify-center items-center gap-2.5">
                  <input type="number"
                    class="justify-start text-zinc-800 text-sm font-medium font-['Inter'] w-10 text-center outline-none no-spinner"
                    [formControl]="quantityControl"
                    min="0" max="9999"
                    appNumericOnly
                  />
                </div>
                <button (click)="incrementQuantity()" class="w-6 h-6 relative bg-white rounded-3xl outline outline-1 outline-offset-[-1px] outline-sky-700 overflow-hidden cursor-pointer flex items-center justify-center">
                  <svg class="w-4 h-4 text-sky-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                  </svg>
                </button>
              </div>
              @if (quantity > 0 && !isInternational) {
                <div class="text-[#616161] text-xs font-medium font-['Inter']">{{ discountPercent }}% Discount Applied</div>
              }
            </div>
          </div>
        }
        
        <!-- Talent Search Access Section - Only for regular view -->
        @if (!isCustomizedView) {
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 bg-[#0E73A9] rounded-full flex items-center justify-center cursor-pointer" (click)="toggleTalentSearch()">
                <span class="text-white text-[16px] mb-1 font-bold">{{ isTalentSearchExpanded() ? '-' : '+' }}</span>
              </div>
              <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Talent Search Access</div>
            </div>
            @if (isTalentSearchExpanded()) {
              <div class="text-gray-500 text-[14px] font-bold font-['Inter']">{{ formattedCvCount }} CV</div>
            }
          </div>
          
          <div class="self-stretch px-4 -mt-6 -ml-4">
            <div class="text-[#0E73A9] text-[13px] font-normal font-['Inter']">To explore Talent Search, click the plus (+) icon</div>
          </div>
        }
        
        <!-- Validity Section - Only shows when quantity > 0 -->
        @if ((isCustomizedView && (standardQuantity > 0 || premiumQuantity > 0 || premiumPlusQuantity > 0)) || (!isCustomizedView && quantity > 0)) {
          <div class="self-stretch h-0 outline outline-1 outline-offset-[-0.50px] outline-neutral-200"></div>
          
          <div class="self-stretch py-2 inline-flex justify-between items-center">
            <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Validity</div>
            <div class="relative">
              <select 
                class="px-3 py-2 border border-[#0074B7] rounded-md text-gray-600 text-sm font-medium font-['Inter'] bg-white appearance-none cursor-pointer pr-8"
                [formControl]="validityControl"
                (change)="onValidityChange($event)"
              >
                @if (filteredValidityOptions.length > 0) {
                  @for (option of filteredValidityOptions; track option.value) {
                    <option [value]="option.value">{{ option.label }}</option>
                  }
                }
              </select>
              <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </div>
            </div>
          </div>
        }
        
        <div class="self-stretch h-0 outline outline-1 outline-offset-[-0.50px] outline-neutral-200"></div>
        
        <!-- Price Display -->
        <div class="self-stretch py-1.5 inline-flex justify-between items-center">
          <div class="justify-start">
            <span class="text-zinc-800 text-base font-semibold font-['Inter']">Price</span>
          </div>
          <div class="inline-flex flex-col justify-center items-start gap-2.5">
            <div class="justify-start text-zinc-800 text-sm font-semibold font-['Inter']">
              {{ formatNumber(priceAfterDiscount) }} {{ currencyLabel }}
            </div>
          </div>
        </div>
        
        <!-- VAT Section - Only show for BDT (not for international/USD) -->
        @if (!isInternational) {
          <div class="self-stretch py-1.5 inline-flex justify-between items-center">
            <div class="justify-start">
              <span class="text-zinc-800 text-base font-semibold font-['Inter']">VAT </span>
              <span class="text-zinc-800 text-xs font-normal font-['Inter']">&#64; 5%</span>
            </div>
            <div class="inline-flex flex-col justify-center items-start gap-2.5">
              <div class="justify-start text-zinc-800 text-sm font-semibold font-['Inter']">
                {{ formatNumber(vatAmount) }} {{ currencyLabel }}
              </div>
            </div>
          </div>
        }
      </div>
      
      <div class="self-stretch h-0 outline outline-1 outline-offset-[-0.50px] outline-neutral-200"></div>
      
      <!-- Total Amount Section -->
      <div class="self-stretch inline-flex justify-between items-center">
        <div class="flex-1 flex justify-between items-center">
          <div class="justify-start text-zinc-800 text-base font-semibold font-['Inter']">Amount to pay</div>
          <div class="flex justify-start items-center gap-3">
            <span class="text-lg font-bold text-sky-700">=</span>
            <div class="text-right justify-center text-sky-700 text-lg font-bold font-['Inter']">
              {{ formatNumber(totalAmount) }} {{ currencyLabel }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Place Order Button -->
  <div class="w-full md:w-[544px] px-6 py-3 bg-green-700 rounded-md inline-flex justify-center items-center gap-2.5 cursor-pointer hover:bg-green-800 transition-colors" (click)="placeOrder()">
    <div class="justify-start text-white text-sm font-semibold font-['Inter']">Place Order</div>
  </div>
</div>

<style>
  input[type=number].no-spinner::-webkit-inner-spin-button,
  input[type=number].no-spinner::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
  }
  input[type=number].no-spinner {
    -moz-appearance: textfield;
    appearance: textfield;
  }
</style>
